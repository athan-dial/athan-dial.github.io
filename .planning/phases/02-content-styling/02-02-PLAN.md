---
phase: 02-content-styling
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified:
  - assets/css/custom.css
  - layouts/partials/head-extend.html
  - layouts/partials/footer-extend.html
autonomous: true

must_haves:
  truths:
    - "User sees executive blue accent color instead of orange theme default"
    - "User toggles dark mode and sees theme switch without broken styles"
    - "User's dark mode preference persists across page refreshes"
    - "User sees minimal, elegant typography"
    - "User experiences smooth color transitions when switching modes"
  artifacts:
    - path: "assets/css/custom.css"
      provides: "CSS custom properties for light/dark modes, typography, colors"
      contains: "data-bs-theme"
    - path: "layouts/partials/head-extend.html"
      provides: "Inline theme detection script preventing FOUC"
      contains: "localStorage"
    - path: "layouts/partials/footer-extend.html"
      provides: "Dark mode toggle button and interaction script"
      contains: "theme-toggle"
  key_links:
    - from: "layouts/partials/head-extend.html"
      to: "document.documentElement"
      via: "data-bs-theme attribute"
      pattern: "setAttribute.*data-bs-theme"
    - from: "assets/css/custom.css"
      to: "Bootstrap dark mode"
      via: "CSS custom properties"
      pattern: "\\[data-bs-theme=\"dark\"\\]"
---

<objective>
Implement custom visual branding with executive blue accent color, functional dark mode with localStorage persistence, and minimal typography system.

Purpose: Transform the stock Hugo Resume appearance into an executive/minimal aesthetic with near-monochromatic colors and perfect dark mode support.

Output: Custom CSS overriding theme defaults, inline script preventing flash of unstyled content (FOUC), and dark mode toggle with persistence.
</objective>

<execution_context>
@/Users/adial/.claude/get-shit-done/workflows/execute-plan.md
@/Users/adial/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-styling/02-CONTEXT.md
@.planning/phases/02-content-styling/02-RESEARCH.md
@.planning/phases/01-theme-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Custom CSS with Color System and Typography</name>
  <files>
    assets/css/custom.css
  </files>
  <action>
Replace the existing Blowfish-era custom.css (28KB) with a fresh, minimal custom CSS file for Hugo Resume.

**Color system (per CONTEXT.md decisions):**
- Near-monochromatic base with executive blue accent
- Light mode primary: #1E3A5F (executive blue)
- Dark mode primary: #4A90E2 (brighter blue for contrast)
- Use Apple-inspired grays: #1D1D1F (text), #86868B (secondary), #F5F5F7 (light bg)

**CSS custom properties structure:**
```css
:root {
  /* Light mode */
  --color-primary: #1E3A5F;
  --color-primary-hover: #2A4A75;
  --color-bg: #FFFFFF;
  --color-text: #1D1D1F;
  --color-text-secondary: #86868B;
  --color-border: #AEAEB2;
  --color-card-bg: #F5F5F7;
}

[data-bs-theme="dark"] {
  /* Dark mode */
  --color-primary: #4A90E2;
  --color-primary-hover: #5BA3F5;
  --color-bg: #1D1D1F;
  --color-text: #F5F5F7;
  --color-text-secondary: #AEAEB2;
  --color-border: #48484A;
  --color-card-bg: #2C2C2E;
}
```

**Typography:**
- Use system font stack for v1 (no custom font files needed): -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif
- This achieves minimal/elegant aesthetic without font file complexity
- Can add self-hosted fonts (Proxima Nova) in v2 if desired

**Override Hugo Resume defaults:**
- Replace orange sidebar/accent with executive blue
- Apply CSS variables to body, headings, links, buttons
- Style section headings with color-primary and bottom border
- Add smooth transitions for color changes (0.3s ease)

**Experience/skills card styling:**
- Subtle card backgrounds using --color-card-bg
- Rounded corners (12px) for modern feel
- Subtle hover states (translateY -2px, soft shadow)
- Different shadow opacity for light/dark modes

**Dark mode toggle button:**
- Fixed position (top-right corner)
- Circular button with border
- Sun/moon icons that swap based on theme
- z-index 1000 to stay above content

Keep CSS focused and minimal (~200-400 lines). Avoid over-engineering.
  </action>
  <verify>
- `cat assets/css/custom.css | wc -l` shows reasonable line count (200-500 lines)
- CSS file contains `:root` CSS variables
- CSS file contains `[data-bs-theme="dark"]` selector
- `grep "#1E3A5F" assets/css/custom.css` finds executive blue reference
- `hugo server` applies custom styles without console errors
  </verify>
  <done>
Custom CSS replaces orange theme with executive blue, defines both light and dark mode color systems via CSS custom properties, uses system font stack.
  </done>
</task>

<task type="auto">
  <name>Task 2: Implement Dark Mode Toggle with Persistence</name>
  <files>
    layouts/partials/head-extend.html
    layouts/partials/footer-extend.html
  </files>
  <action>
Create Hugo partial files to extend the theme's head and footer without modifying theme files directly.

**layouts/partials/head-extend.html:**
Create inline script that runs BEFORE page render to prevent FOUC (flash of unstyled content):

```html
<script>
  (function() {
    // Check localStorage first, then system preference, default to light
    const savedTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = savedTheme || (systemDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-bs-theme', theme);
  })();
</script>
```

This script MUST be inline (not external) and run before any CSS loads to prevent flash.

**layouts/partials/footer-extend.html:**
Add toggle button and click handler:

```html
<button id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
  <span class="light-icon" aria-hidden="true">&#x2600;&#xFE0F;</span>
  <span class="dark-icon" aria-hidden="true">&#x1F319;</span>
</button>

<script>
  document.getElementById('theme-toggle').addEventListener('click', function() {
    const html = document.documentElement;
    const currentTheme = html.getAttribute('data-bs-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';

    html.setAttribute('data-bs-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  });
</script>
```

**Important considerations:**
- Use HTML entities for sun/moon icons (no external icon library needed for v1)
- Include aria-label for accessibility
- Toggle button styling handled in custom.css (from Task 1)

Create the layouts/partials/ directory if it doesn't exist.
  </action>
  <verify>
- `ls layouts/partials/` shows head-extend.html and footer-extend.html
- `grep "localStorage" layouts/partials/head-extend.html` finds persistence code
- `grep "theme-toggle" layouts/partials/footer-extend.html` finds toggle button
- `hugo server` renders page and toggle button is visible
- Click toggle → theme changes immediately
- Refresh page → theme preference persists
  </verify>
  <done>
Dark mode toggle visible, clicking toggles between light/dark themes, preference persists in localStorage across page refreshes, no FOUC on load.
  </done>
</task>

</tasks>

<verification>
Run these checks after both tasks complete:

1. **Visual inspection in light mode:**
   ```bash
   hugo server -D
   ```
   - Primary color is executive blue (not orange)
   - Text uses dark grays (#1D1D1F)
   - Background is clean white
   - Toggle button visible in top-right corner

2. **Visual inspection in dark mode:**
   - Click toggle button
   - Background switches to dark (#1D1D1F)
   - Text switches to light (#F5F5F7)
   - Primary blue adjusts to brighter shade (#4A90E2)
   - No broken contrast (text readable)

3. **Persistence test:**
   - Set dark mode
   - Refresh page (Cmd+R)
   - Page loads in dark mode (no flash to light then dark)
   - Close browser, reopen → still dark mode

4. **Transition smoothness:**
   - Click toggle multiple times
   - Color transitions are smooth (0.3s ease)
   - No jarring immediate switches

5. **Mobile responsiveness:**
   - Open DevTools → toggle device toolbar
   - Check iPhone/iPad viewport
   - Toggle button accessible on mobile
   - Sections stack properly
</verification>

<success_criteria>
- [ ] Orange accent color completely replaced with executive blue
- [ ] Light mode renders with Apple-inspired gray palette
- [ ] Dark mode renders with proper contrast (WCAG AA)
- [ ] Toggle button visible and functional
- [ ] Theme persists across page refresh
- [ ] No FOUC (flash of unstyled content) on page load
- [ ] Smooth transitions between light/dark modes
- [ ] `hugo server` runs without CSS errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-styling/02-02-SUMMARY.md`
</output>
