---
phase: 08-review-and-approval
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ~/model-citizen-vault/.templates/draft-post.md
  - ~/model-citizen-vault/_review-dashboard.md
  - ~/model-citizen-vault/README.md
autonomous: false

must_haves:
  truths:
    - "User opens _review-dashboard.md in Obsidian and sees pending drafts listed via Dataview"
    - "User reads draft template and finds 5-item approval checklist with source/idea backlinks"
    - "User reads README and understands both approval methods (folder move OR frontmatter status)"
    - "User knows only /publish_queue/ contents or status:publish files will sync to Quartz"
  artifacts:
    - path: "~/model-citizen-vault/.templates/draft-post.md"
      provides: "Draft template with approval checklist, source_note, idea_card frontmatter"
      contains: "approval checklist"
    - path: "~/model-citizen-vault/_review-dashboard.md"
      provides: "Dataview-powered review dashboard showing pending drafts and approved content"
      contains: "dataview"
    - path: "~/model-citizen-vault/README.md"
      provides: "Approval workflow documentation with dual-method instructions"
      contains: "publish_queue"
  key_links:
    - from: "~/model-citizen-vault/_review-dashboard.md"
      to: "drafts/ folder"
      via: "Dataview FROM query"
      pattern: 'FROM "drafts"'
    - from: "~/model-citizen-vault/.templates/draft-post.md"
      to: "source notes and idea cards"
      via: "frontmatter wikilinks"
      pattern: "source_note|idea_card"
---

<objective>
Create the approval workflow artifacts for Model Citizen: update draft template with approval checklist and source backlinks, create a Dataview review dashboard, and document the dual approval workflow in the vault README.

Purpose: This is the safety gate preventing accidental publication. Users must consciously approve content before it syncs to Quartz.
Output: Updated draft template, new review dashboard, updated README with approval workflow docs.
</objective>

<execution_context>
@/Users/adial/.claude/get-shit-done/workflows/execute-plan.md
@/Users/adial/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-review-and-approval/08-RESEARCH.md
@~/model-citizen-vault/.templates/draft-post.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update draft template and create review dashboard</name>
  <files>
    ~/model-citizen-vault/.templates/draft-post.md
    ~/model-citizen-vault/_review-dashboard.md
  </files>
  <action>
  **1. Update draft template** (`~/model-citizen-vault/.templates/draft-post.md`):

  Replace the existing template with an enhanced version that includes:
  - Frontmatter fields: `source_note`, `idea_card`, `reviewed_at: null`, `reviewed_by: null`
  - Keep existing fields: title, date, status (draft), tags, summary, related
  - Body section at bottom: "## Pre-Publish Review" with 5-item checklist:
    - [ ] Draft is complete and well-written
    - [ ] Sources/citations are accurate
    - [ ] No sensitive information exposed
    - [ ] Title is clear and compelling
    - [ ] Related links to vault notes work
  - Below checklist: brief approval instructions (move to /publish_queue/ OR set status: publish)
  - Keep the existing content structure (Introduction, Main Content, Conclusion)
  - Keep "Draft Notes" section for working notes

  **2. Create review dashboard** (`~/model-citizen-vault/_review-dashboard.md`):

  Create a Dataview-powered dashboard with these sections:
  - **Pending Drafts**: Dataview TABLE from "drafts" where status = "draft", showing date, source_note, idea_card columns, sorted by date DESC
  - **Approved for Publishing**: Dataview TABLE from "publish_queue", showing date, reviewed_at columns, sorted by reviewed_at DESC, LIMIT 10
  - **Recent Enrichment**: Dataview TABLE from "sources" where status = "enriched" and date within 7 days, sorted by date DESC
  - **How to Approve** section: Brief inline instructions (3-4 steps)

  Do NOT use emojis in the dashboard. Use plain text headers.

  Note: Dataview plugin must be installed in Obsidian for the dashboard to render. The dashboard file is a regular markdown file with dataview code blocks.
  </action>
  <verify>
  - File exists: `~/model-citizen-vault/.templates/draft-post.md` with source_note and idea_card in frontmatter
  - File exists: `~/model-citizen-vault/_review-dashboard.md` with dataview code blocks
  - Draft template contains 5 checklist items
  - Dashboard has at least 3 dataview queries
  </verify>
  <done>Draft template has approval checklist + source backlinks; review dashboard shows pending/approved/recent content via Dataview queries</done>
</task>

<task type="auto">
  <name>Task 2: Document approval workflow in vault README</name>
  <files>
    ~/model-citizen-vault/README.md
  </files>
  <action>
  Read the existing `~/model-citizen-vault/README.md` and append (or update) an "## Approval Workflow" section.

  The section must document:

  1. **How to Review Content**:
     - Open `_review-dashboard.md` to see pending drafts
     - Click a draft to open it
     - Read content, verify sources (click wikilinks), check for sensitive info

  2. **How to Approve (Two Methods)**:
     - **Method A (Folder-based):** Move/drag file from `/drafts/` to `/publish_queue/` in Obsidian file explorer
     - **Method B (Frontmatter-based):** Change `status: draft` to `status: publish`, add `reviewed_at` timestamp, set `reviewed_by: human`
     - Note: Either method is sufficient. Use whichever feels natural.

  3. **Publishing Rules**:
     - Content publishes if it's in `/publish_queue/` OR has `status: publish` in frontmatter
     - Everything else stays private in the vault
     - n8n never auto-approves; drafts stay in `/drafts/` until human decision

  4. **Audit Trail**:
     - Git commits track all approval actions
     - Recommended commit message: `docs: approve [draft-name] for publication`

  Keep the section concise (not a wall of text). Use numbered steps and brief explanations.

  If README.md doesn't exist yet, create it with a brief vault description header before the approval workflow section.
  </action>
  <verify>
  - `~/model-citizen-vault/README.md` contains "Approval Workflow" section
  - README mentions both approval methods (folder and frontmatter)
  - README mentions publish_queue folder
  - README mentions publishing rules (OR condition)
  </verify>
  <done>README documents dual approval methods, publishing rules, and audit trail guidance</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
  Approval workflow artifacts for Model Citizen vault:
  1. Updated draft template with approval checklist and source backlinks
  2. Dataview review dashboard (_review-dashboard.md)
  3. Approval workflow documentation in README.md
  </what-built>
  <how-to-verify>
  1. Open Obsidian and navigate to the model-citizen-vault
  2. Open `_review-dashboard.md` — verify Dataview renders pending drafts table (requires Dataview plugin)
  3. Open `.templates/draft-post.md` — verify checklist and frontmatter fields look right
  4. Open `README.md` — verify approval workflow section is clear and accurate
  5. Verify: Do you understand both approval methods? Does the workflow feel natural?
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
- Draft template has: source_note, idea_card, reviewed_at, reviewed_by in frontmatter + 5-item checklist in body
- Review dashboard has: 3+ Dataview queries (pending, approved, recent)
- README has: Approval Workflow section with dual methods documented
- All three requirements covered: MC-15 (workflow documented), MC-16 (review screen), MC-17 (publishing rules clear)
</verification>

<success_criteria>
1. User can open _review-dashboard.md and see pending drafts (MC-16)
2. User reads README and understands approval workflow with both methods (MC-15)
3. User knows publishing rules: /publish_queue/ OR status:publish triggers sync (MC-17)
4. New drafts from enrichment pipeline will use updated template with checklist
</success_criteria>

<output>
After completion, create `.planning/phases/08-review-and-approval/08-01-SUMMARY.md`
</output>
