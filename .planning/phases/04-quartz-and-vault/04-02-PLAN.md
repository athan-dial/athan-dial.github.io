---
phase: 04-quartz-and-vault
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - model-citizen-vault/SCHEMA.md
  - model-citizen-vault/inbox/.gitkeep
  - model-citizen-vault/sources/.gitkeep
  - model-citizen-vault/enriched/.gitkeep
  - model-citizen-vault/ideas/.gitkeep
  - model-citizen-vault/drafts/.gitkeep
  - model-citizen-vault/publish_queue/.gitkeep
  - model-citizen-vault/published/.gitkeep
  - model-citizen-vault/.templates/source-note.md
  - model-citizen-vault/.templates/enriched-note.md
  - model-citizen-vault/.templates/idea-card.md
autonomous: true

must_haves:
  truths:
    - "User can clone model-citizen-vault and see all 7 workflow folders"
    - "User can read SCHEMA.md and understand frontmatter requirements"
    - "User can create note in /sources/ using template and it validates"
  artifacts:
    - path: "model-citizen-vault/SCHEMA.md"
      provides: "Vault folder taxonomy and frontmatter specification"
      min_lines: 80
    - path: "model-citizen-vault/inbox/.gitkeep"
      provides: "inbox folder exists in git"
    - path: "model-citizen-vault/sources/.gitkeep"
      provides: "sources folder exists in git"
    - path: "model-citizen-vault/publish_queue/.gitkeep"
      provides: "publish_queue folder exists in git"
    - path: "model-citizen-vault/.templates/source-note.md"
      provides: "Obsidian template for source notes"
      contains: "source_url"
  key_links:
    - from: "SCHEMA.md"
      to: "folder structure"
      via: "documents workflow stages"
      pattern: "inbox|sources|enriched|ideas|drafts|publish_queue"
    - from: ".templates/*.md"
      to: "frontmatter schema"
      via: "enforces consistent structure"
      pattern: "status.*inbox|enriched|idea|draft|publish"
---

<objective>
Create public Obsidian vault repository with workflow folder structure and documented schema.

Purpose: Establish the source repository where all captured content lives. Documentation ensures consistent structure for automation in later phases.

Output: Public GitHub repository `model-citizen-vault` with 7 workflow folders, SCHEMA.md documentation, and Obsidian templates.
</objective>

<execution_context>
@/Users/adial/.claude/get-shit-done/workflows/execute-plan.md
@/Users/adial/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-quartz-and-vault/04-CONTEXT.md
@.planning/phases/04-quartz-and-vault/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create vault repository with folder structure</name>
  <files>
    ~/model-citizen-vault/inbox/.gitkeep
    ~/model-citizen-vault/sources/.gitkeep
    ~/model-citizen-vault/enriched/.gitkeep
    ~/model-citizen-vault/ideas/.gitkeep
    ~/model-citizen-vault/drafts/.gitkeep
    ~/model-citizen-vault/publish_queue/.gitkeep
    ~/model-citizen-vault/published/.gitkeep
    ~/model-citizen-vault/.obsidian/.gitkeep
    ~/model-citizen-vault/.templates/.gitkeep
  </files>
  <action>
    1. Create vault directory and folder structure:
       ```bash
       mkdir -p ~/model-citizen-vault
       cd ~/model-citizen-vault

       # Create workflow folders (from CONTEXT.md taxonomy)
       mkdir -p inbox sources enriched ideas drafts publish_queue published

       # Create Obsidian config and templates directories
       mkdir -p .obsidian .templates

       # Add .gitkeep files so empty folders are tracked
       touch inbox/.gitkeep
       touch sources/.gitkeep
       touch enriched/.gitkeep
       touch ideas/.gitkeep
       touch drafts/.gitkeep
       touch publish_queue/.gitkeep
       touch published/.gitkeep
       touch .obsidian/.gitkeep
       touch .templates/.gitkeep
       ```

    2. Create README.md for repository landing page:
       ```markdown
       # Model Citizen Vault

       A public Obsidian vault for capturing, enriching, and publishing knowledge.

       ## Folder Structure

       | Folder | Purpose |
       |--------|---------|
       | `inbox/` | Raw captures (unprocessed, weekly review) |
       | `sources/` | Normalized source notes (YouTube transcripts, articles) |
       | `enriched/` | Enriched notes (summaries, tags, quotes added) |
       | `ideas/` | Idea cards (blog angles, outlines) |
       | `drafts/` | Draft posts (first outlines and full drafts) |
       | `publish_queue/` | Approved for publishing |
       | `published/` | Archive of published content |

       ## Publishing

       Content in `publish_queue/` with `status: publish` frontmatter gets published to the [Model Citizen site](https://athan-dial.github.io/model-citizen/).

       ## Schema

       See [SCHEMA.md](SCHEMA.md) for frontmatter specification and folder rules.
       ```

    3. Initialize git repository:
       ```bash
       git init
       git add .
       git commit -m "feat: initial vault structure with workflow folders"
       ```
  </action>
  <verify>
    - `ls -la ~/model-citizen-vault/` shows all 7 workflow folders + .obsidian + .templates
    - `find ~/model-citizen-vault -name ".gitkeep" | wc -l` returns 9
    - `cat ~/model-citizen-vault/README.md` shows folder documentation
  </verify>
  <done>
    Vault directory created with all 7 workflow folders, .obsidian config directory, .templates directory, and repository README.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document vault schema in SCHEMA.md</name>
  <files>
    ~/model-citizen-vault/SCHEMA.md
  </files>
  <action>
    Create comprehensive SCHEMA.md documentation at ~/model-citizen-vault/SCHEMA.md with the following content:

    ```markdown
    # Model Citizen Vault Schema

    This document defines the folder structure, frontmatter schema, and workflow rules for the Model Citizen vault.

    ## Folder Taxonomy

    The vault uses **workflow-based folders** (not topic categories). Notes move through folders as they progress from raw capture to published content.

    ### Workflow Stages

    | Folder | Status Value | Description | Automation Writes | Human Reviews |
    |--------|--------------|-------------|-------------------|---------------|
    | `inbox/` | `inbox` | Raw captures, unprocessed | Yes | Weekly |
    | `sources/` | `inbox` | Normalized source notes | Yes | As needed |
    | `enriched/` | `enriched` | Notes with summaries, tags, quotes | Yes | As needed |
    | `ideas/` | `idea` | Blog angles, outlines | Yes | Weekly |
    | `drafts/` | `draft` | First outlines and full drafts | Yes | Before publish |
    | `publish_queue/` | `publish` | Approved for publishing | No | Explicit approval |
    | `published/` | `published` | Archive after publishing | No | Reference only |

    ### Folder Rules

    1. **Automation writes to:** inbox/, sources/, enriched/, ideas/, drafts/
    2. **Human explicitly moves to:** publish_queue/
    3. **Archive (optional):** published/ (for removed content or historical reference)
    4. **Nothing auto-publishes:** Human must move note to publish_queue/ OR set `status: publish`

    ## Frontmatter Schema

    All notes MUST have YAML frontmatter with required fields.

    ### Required Fields (All Notes)

    ```yaml
    ---
    title: "Note title"                    # Human-readable title
    date: 2026-02-05                       # Creation date (YYYY-MM-DD)
    status: "inbox"                        # Workflow state (see below)
    tags: ["tag1", "tag2"]                 # Array of lowercase-kebab-case tags
    ---
    ```

    ### Status Values

    | Status | Meaning | Folder |
    |--------|---------|--------|
    | `inbox` | Unprocessed raw capture | inbox/, sources/ |
    | `enriched` | Has summary, tags, quotes | enriched/ |
    | `idea` | Blog angle or outline | ideas/ |
    | `draft` | In progress draft | drafts/ |
    | `publish` | Approved for publication | publish_queue/ |
    | `published` | Already published, archived | published/ |

    ### Source Notes (Additional Fields)

    For notes in `sources/` folder (captured from external sources):

    ```yaml
    ---
    title: "Note title"
    date: 2026-02-05
    status: "inbox"
    tags: []
    source: "YouTube"                      # Source type: YouTube | Email | Web | Manual
    source_url: "https://..."              # Original source URL
    ---
    ```

    ### Enriched Notes (Additional Fields)

    For notes in `enriched/` folder (processed by Claude):

    ```yaml
    ---
    title: "Note title"
    date: 2026-02-05
    status: "enriched"
    tags: ["topic-1", "topic-2"]
    source: "YouTube"
    source_url: "https://..."
    summary: "1-2 sentence summary of the content"
    ---
    ```

    ### Idea Cards (Additional Fields)

    For notes in `ideas/` folder (blog angles and outlines):

    ```yaml
    ---
    title: "Idea: Blog Post Title"
    date: 2026-02-05
    status: "idea"
    tags: ["topic-1", "topic-2"]
    idea_angles:                           # Array of potential blog angles
      - "Angle 1: How to..."
      - "Angle 2: Why..."
    related:                               # Array of wikilinks to source notes
      - "[[source-note-1]]"
      - "[[source-note-2]]"
    ---
    ```

    ### Draft Posts (Additional Fields)

    For notes in `drafts/` folder (actual post content):

    ```yaml
    ---
    title: "Draft: Blog Post Title"
    date: 2026-02-05
    status: "draft"
    tags: ["topic-1", "topic-2"]
    summary: "1-2 sentence summary for preview"
    related:
      - "[[idea-card]]"
      - "[[source-note-1]]"
    ---
    ```

    ### Publish Queue (Minimal Changes)

    Notes moved to `publish_queue/` should have:

    ```yaml
    ---
    title: "Final Post Title"              # Clean title (no "Draft:" prefix)
    date: 2026-02-05
    status: "publish"                      # REQUIRED for Quartz to include
    tags: ["topic-1", "topic-2"]
    summary: "Preview text for listings"
    ---
    ```

    ## Tag Conventions

    - **Format:** lowercase-kebab-case (e.g., `ml-systems`, `decision-frameworks`)
    - **No spaces:** Use hyphens, not spaces or underscores
    - **Consistent vocabulary:** Check existing tags before creating new ones
    - **Hierarchy via prefix:** `product-strategy`, `product-metrics` (not nested folders)

    ### Common Tags

    | Tag | Use For |
    |-----|---------|
    | `ml-systems` | Machine learning infrastructure, ML ops |
    | `decision-frameworks` | Decision-making processes, frameworks |
    | `product-strategy` | Product direction, roadmaps |
    | `data-quality` | Data validation, integrity |
    | `team-leadership` | Management, team dynamics |

    ## Publishing Rules

    Content becomes public on the Quartz site if **BOTH** conditions are true:

    1. Note is in `publish_queue/` folder
    2. Frontmatter has `status: publish`

    ### Safety Guardrails

    - **ignorePatterns in Quartz:** Folders inbox/, sources/, enriched/, ideas/, drafts/ are excluded from Quartz build
    - **ExplicitPublish plugin:** Only notes with `status: publish` are rendered
    - **No auto-publish:** Automation can move notes through workflow but NEVER to publish_queue/

    ### Publishing Checklist

    Before moving a note to `publish_queue/`:

    - [ ] Title is clean (no "Draft:" prefix)
    - [ ] Status is set to `publish`
    - [ ] Summary is written (used in listings)
    - [ ] Tags are accurate and follow conventions
    - [ ] Content is proofread
    - [ ] All wikilinks resolve (or are removed)

    ## File Naming

    - **Format:** lowercase-kebab-case (e.g., `understanding-metric-theater.md`)
    - **No spaces:** Use hyphens, not spaces
    - **No dates in filename:** Date is in frontmatter, not filename
    - **Descriptive:** Filename should hint at content

    ### Examples

    | Good | Bad |
    |------|-----|
    | `understanding-metric-theater.md` | `2026-02-05-metrics.md` |
    | `claude-code-ssh-integration.md` | `Claude Code SSH Integration.md` |
    | `idea-decision-velocity-blog.md` | `idea_decision_velocity_blog.md` |

    ## Wikilinks

    - **Internal links:** Use Obsidian wikilinks: `[[note-name]]`
    - **Display text:** Use pipe syntax: `[[note-name|Display Text]]`
    - **Headings:** Link to headings: `[[note-name#Section]]`
    - **External links:** Standard markdown: `[text](https://...)`

    ### Link Resolution

    Quartz resolves wikilinks using "shortest" mode. This means:
    - `[[metric-theater]]` resolves to `publish_queue/metric-theater.md`
    - No need for full paths in wikilinks
    - Duplicate filenames across folders may cause issues (avoid)

    ---

    *Schema version: 1.0*
    *Last updated: 2026-02-05*
    ```
  </action>
  <verify>
    - `wc -l ~/model-citizen-vault/SCHEMA.md` shows 150+ lines
    - `grep -c "status:" ~/model-citizen-vault/SCHEMA.md` shows multiple occurrences
    - `grep "inbox|sources|enriched|ideas|drafts|publish_queue" ~/model-citizen-vault/SCHEMA.md` returns matches
  </verify>
  <done>
    SCHEMA.md created with comprehensive documentation of folder taxonomy, frontmatter schema, tag conventions, and publishing rules.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Obsidian templates and push to GitHub</name>
  <files>
    ~/model-citizen-vault/.templates/source-note.md
    ~/model-citizen-vault/.templates/enriched-note.md
    ~/model-citizen-vault/.templates/idea-card.md
    ~/model-citizen-vault/.templates/draft-post.md
  </files>
  <action>
    1. Create source note template at .templates/source-note.md:
       ```markdown
       ---
       title: "{{title}}"
       date: {{date:YYYY-MM-DD}}
       status: "inbox"
       tags: []
       source: ""
       source_url: ""
       ---

       ## Source Context

       [What is this source? Who created it? Why is it relevant?]

       ## Key Points

       -
       -
       -

       ## Quotes

       >

       ## My Notes

       [Personal observations, questions, connections]
       ```

    2. Create enriched note template at .templates/enriched-note.md:
       ```markdown
       ---
       title: "{{title}}"
       date: {{date:YYYY-MM-DD}}
       status: "enriched"
       tags: []
       source: ""
       source_url: ""
       summary: ""
       ---

       ## Summary

       [1-2 sentence summary of the content]

       ## Key Takeaways

       1.
       2.
       3.

       ## Relevant Quotes

       >

       ## Connections

       - Related to: [[]]
       - Contradicts: [[]]
       - Builds on: [[]]

       ## Questions

       -
       ```

    3. Create idea card template at .templates/idea-card.md:
       ```markdown
       ---
       title: "Idea: {{title}}"
       date: {{date:YYYY-MM-DD}}
       status: "idea"
       tags: []
       idea_angles:
         - ""
       related:
         - "[[]]"
       ---

       ## Core Idea

       [What is the main insight or argument?]

       ## Blog Angles

       ### Angle 1:

       [How to frame this as a post]

       ### Angle 2:

       [Alternative framing]

       ## Supporting Sources

       - [[source-1]]
       - [[source-2]]

       ## Target Audience

       [Who would find this valuable?]

       ## Open Questions

       -
       ```

    4. Create draft post template at .templates/draft-post.md:
       ```markdown
       ---
       title: "{{title}}"
       date: {{date:YYYY-MM-DD}}
       status: "draft"
       tags: []
       summary: ""
       related:
         - "[[]]"
       ---

       ## Introduction

       [Hook + context + thesis]

       ## Main Content

       ### Section 1

       [Content]

       ### Section 2

       [Content]

       ## Conclusion

       [Summary + call to action or reflection]

       ---

       ## Draft Notes (remove before publishing)

       - Sources to cite:
       - Images needed:
       - Questions to answer:
       ```

    5. Commit templates:
       ```bash
       cd ~/model-citizen-vault
       git add .
       git commit -m "docs: add SCHEMA.md and Obsidian templates"
       ```

    6. Create GitHub repository and push:
       ```bash
       gh repo create model-citizen-vault --public --source=. --remote=origin
       git push -u origin main
       ```
       If auth error, Claude should create checkpoint for user to authenticate.
  </action>
  <verify>
    - `ls ~/model-citizen-vault/.templates/` shows 4 template files
    - `grep "source_url" ~/model-citizen-vault/.templates/source-note.md` returns match
    - `gh repo view athan-dial/model-citizen-vault` shows repository exists
    - Repository visible at https://github.com/athan-dial/model-citizen-vault
  </verify>
  <done>
    Obsidian templates created for all workflow stages, repository pushed to GitHub as public repo.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Repository exists on GitHub:**
   ```bash
   gh repo view athan-dial/model-citizen-vault --json url
   ```

2. **Folder structure correct:**
   ```bash
   gh api repos/athan-dial/model-citizen-vault/contents --jq '.[].name'
   ```
   Should show: inbox, sources, enriched, ideas, drafts, publish_queue, published, SCHEMA.md, README.md

3. **SCHEMA.md accessible:**
   ```bash
   curl -s https://raw.githubusercontent.com/athan-dial/model-citizen-vault/main/SCHEMA.md | head -20
   ```

4. **Templates exist:**
   ```bash
   gh api repos/athan-dial/model-citizen-vault/contents/.templates --jq '.[].name'
   ```
   Should show: source-note.md, enriched-note.md, idea-card.md, draft-post.md
</verification>

<success_criteria>
- Vault repository exists at github.com/athan-dial/model-citizen-vault
- All 7 workflow folders exist (inbox, sources, enriched, ideas, drafts, publish_queue, published)
- SCHEMA.md documents folder taxonomy, frontmatter schema, and publishing rules
- 4 Obsidian templates exist in .templates/ directory
- Repository is public and README explains folder structure
</success_criteria>

<output>
After completion, create `.planning/phases/04-quartz-and-vault/04-02-SUMMARY.md`
</output>
