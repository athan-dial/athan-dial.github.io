---
phase: 04-quartz-and-vault
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified:
  - model-citizen-vault/publish_queue/hello-world.md
autonomous: false

must_haves:
  truths:
    - "User visits athan-dial.github.io/model-citizen/ and sees landing page"
    - "User creates sample note in vault and it follows schema"
    - "User confirms both repos are public and accessible"
  artifacts:
    - path: "model-citizen-vault/publish_queue/hello-world.md"
      provides: "Sample note demonstrating schema compliance"
      contains: "status: publish"
  key_links:
    - from: "model-citizen-vault/publish_queue/"
      to: "model-citizen-quartz content/"
      via: "future sync (not implemented in Phase 4)"
      pattern: "N/A - validated in Phase 9"
---

<objective>
Verify end-to-end deployment of Quartz site and validate vault schema with sample note.

Purpose: Confirm all Phase 4 requirements are met before proceeding to automation phases. User validates that infrastructure is working correctly.

Output: Human-verified confirmation that both repos are deployed and schema is documented correctly.
</objective>

<execution_context>
@/Users/adial/.claude/get-shit-done/workflows/execute-plan.md
@/Users/adial/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-quartz-and-vault/04-CONTEXT.md
@.planning/phases/04-quartz-and-vault/04-01-SUMMARY.md
@.planning/phases/04-quartz-and-vault/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sample note demonstrating schema compliance</name>
  <files>
    ~/model-citizen-vault/publish_queue/hello-world.md
  </files>
  <action>
    1. Create a sample note in publish_queue that follows the schema exactly:
       ```bash
       cat > ~/model-citizen-vault/publish_queue/hello-world.md << 'EOF'
       ---
       title: "Hello World"
       date: 2026-02-05
       status: "publish"
       tags: ["meta", "model-citizen"]
       summary: "A test post to verify the Model Citizen publishing pipeline."
       ---

       # Hello World

       This is a test post to verify the Model Citizen publishing pipeline is working correctly.

       ## What is Model Citizen?

       Model Citizen is a public knowledge garden that shows how ideas develop from raw sources to published articles. It combines:

       - An **Obsidian vault** where I capture and process sources
       - A **Quartz site** where approved content gets published
       - **n8n automation** that handles daily ingestion and enrichment

       ## Why Public?

       Unlike polished blogs that hide the messy thinking, Model Citizen shows everything:
       - Raw source captures
       - AI-enriched summaries
       - Idea cards and drafts
       - The explicit approval process

       This transparency is intentional. It signals intellectual honesty and lets others see how ideas evolve.

       ## Next Steps

       This hello world post confirms the basic infrastructure works. Future phases will add:
       - YouTube transcript ingestion
       - Claude-powered enrichment
       - Human review workflows
       - Automated publishing sync

       ---

       *Published via Model Citizen pipeline*
       EOF
       ```

    2. Commit and push the sample note:
       ```bash
       cd ~/model-citizen-vault
       git add publish_queue/hello-world.md
       git commit -m "docs: add hello world sample note"
       git push
       ```

    3. Validate frontmatter against schema:
       ```bash
       # Check required fields exist
       grep -E "^title:|^date:|^status:|^tags:" ~/model-citizen-vault/publish_queue/hello-world.md
       ```
  </action>
  <verify>
    - `cat ~/model-citizen-vault/publish_queue/hello-world.md | head -10` shows valid frontmatter
    - `grep "status: \"publish\"" ~/model-citizen-vault/publish_queue/hello-world.md` returns match
    - `gh api repos/athan-dial/model-citizen-vault/contents/publish_queue --jq '.[].name'` shows hello-world.md
  </verify>
  <done>
    Sample note created in publish_queue following schema exactly, pushed to GitHub.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Phase 4 infrastructure for Model Citizen:

    1. **Quartz Site** (model-citizen-quartz repo):
       - Quartz v4 scaffolded with correct baseUrl
       - GitHub Actions workflow configured
       - Deployed to athan-dial.github.io/model-citizen/

    2. **Vault Repository** (model-citizen-vault repo):
       - 7 workflow folders (inbox, sources, enriched, ideas, drafts, publish_queue, published)
       - SCHEMA.md documenting frontmatter and folder rules
       - 4 Obsidian templates for each workflow stage
       - Sample hello-world.md note in publish_queue
  </what-built>
  <how-to-verify>
    **Quartz Site Verification:**

    1. Visit https://athan-dial.github.io/model-citizen/
    2. Confirm you see "Model Citizen" landing page
    3. Check that no 404 errors appear in browser DevTools (Network tab)
    4. Verify dark mode toggle works (if present in header)

    **Vault Repository Verification:**

    1. Visit https://github.com/athan-dial/model-citizen-vault
    2. Confirm all 7 folders are visible: inbox/, sources/, enriched/, ideas/, drafts/, publish_queue/, published/
    3. Click on SCHEMA.md and confirm it documents:
       - Folder taxonomy with workflow stages
       - Frontmatter schema with required fields
       - Publishing rules (status: publish required)
    4. Check .templates/ folder has 4 templates

    **Schema Compliance Check:**

    1. Click on publish_queue/hello-world.md
    2. Verify frontmatter has: title, date, status: "publish", tags array, summary
    3. Confirm content renders correctly in GitHub preview

    **Cross-Repo Link:**

    1. Confirm landing page on Quartz site links to vault repo
    2. Confirm vault README links to Quartz site
  </how-to-verify>
  <resume-signal>
    Type "approved" if all verifications pass.

    If issues found, describe:
    - Which verification failed
    - What you observed vs expected
    - Any error messages or screenshots
  </resume-signal>
</task>

</tasks>

<verification>
Phase 4 requirements checklist:

| Requirement | Verification | Status |
|-------------|--------------|--------|
| MC-01: Quartz repo scaffolded with baseURL | `gh repo view athan-dial/model-citizen-quartz` exists | Pending user |
| MC-02: GitHub Pages deploy working | https://athan-dial.github.io/model-citizen/ loads | Pending user |
| MC-03: Vault folder taxonomy documented | SCHEMA.md has folder table | Pending user |
| MC-04: Markdown schema documented | SCHEMA.md has frontmatter spec | Pending user |

All requirements must be verified by user before Phase 4 is complete.
</verification>

<success_criteria>
User confirms all of the following:
1. Quartz site loads at athan-dial.github.io/model-citizen/
2. Vault repo has 7 workflow folders visible
3. SCHEMA.md documents folder taxonomy and frontmatter schema
4. Sample note in publish_queue follows schema correctly
5. Cross-repo links work (Quartz links to vault, vault links to Quartz)
</success_criteria>

<output>
After completion, create `.planning/phases/04-quartz-and-vault/04-03-SUMMARY.md`
</output>
